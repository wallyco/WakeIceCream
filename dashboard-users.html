<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/png" href="/img/favicon.ico">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <title>Dashboard</title>

    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <meta name="viewport" content="width=device-width" />


    <!-- Bootstrap core CSS     -->
    <link href="/css/bootstrap.min.css" rel="stylesheet" />

    <!--  Light Bootstrap Table core CSS    -->
    <link href="/css/light-bootstrap-dashboard.css?v=1.4.0" rel="stylesheet" />
    <link rel="stylesheet" href="/css/style.css">

    <!--     Fonts and icons     -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,700,300' rel='stylesheet' type='text/css'>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300&display=swap" rel="stylesheet">
    <link href="/css/pe-icon-7-stroke.css" rel="stylesheet" />

    <style>
        #test {
            color: black;
            font-size: 16px;
        }

        .addUser {
            width: 98%;
            padding-left: 10px;
        }

        #userButton {
            margin: 10px;
        }
    </style>
</head>

<body>
<!-- SIDEBAR -->
    <div class="wrapper">
        <div class="sidebar">
            <div class="sidebar-wrapper" style="background-color: #a64de2;">
                <div class="logo">
                    <a href="" class="simple-text" id="username">
                        Hi, Username
                    </a>
                </div>
                <ul class="nav">
                    <li>
                        <a onclick="redirectUser('')">
                            <i class="pe-7s-home"></i>
                            <p>DASHBOARD</p>
                        </a>
                    </li>
                    <li class="active">
                        <a onclick="redirectUser('-users')">
                            <i class="pe-7s-note2"></i>
                            <p>USERS</p>
                        </a>
                    </li>

                    <li>
                        <a onclick="redirectUser('-products')">
                            <i class="pe-7s-graph3"></i>
                            <p>PRODUCTS</p>
                        </a>
                    </li>
                </ul>
            </div>
    </div>
<!-- END OF SIDE BAR -->
<!-- TOP-NAV BAR -->
        <div class="main-panel">
            <nav class="navbar navbar-default navbar-fixed">
                <div class="container-fluid">
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navigation-example-2">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <a class="navbar-brand" href="#">Dashboard</a>
                    </div>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <form class="form-inline my-2 my-lg-0">
                                <input class="form-control mr-sm-2" type="search" placeholder="Search"
                                    aria-label="Search">
                                <button class="btn btn-outline-success my-2 my-sm-0" type="submit"><i
                                        class="fa fa-search"></i></button>
                            </form>
                        </li>
                        <li class="separator hidden-lg"></li>
                    </ul>
                    <div class="collapse navbar-collapse">
                        <ul class="nav navbar-nav navbar-left">
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                    <i class="fa fa-bell"></i>
                                    <b class="caret hidden-lg hidden-md"></b>
                                    <p class="hidden-lg hidden-md">
                                        5 Notifications
                                        <b class="caret"></b>
                                    </p>
                                </a>
                                <ul class="dropdown-menu">
                                    <li><a href="#">Notification 1</a></li>
                                    <li><a href="#">Notification 2</a></li>
                                    <li><a href="#">Notification 3</a></li>
                                    <li><a href="#">Notification 4</a></li>
                                    <li><a href="#">Another notification</a></li>
                                </ul>
                            </li>
                        </ul>
                        <li class="separator hidden-lg"></li>
                    </ul>
                </div>
            </div>
        </nav>
<!-- END OF TOP-NAV BAR -->
<!-- MAIN CONTENT WINDOW -->
        <div class="content" style="background-color: rgb(255, 212, 249);">
            <div class="d-inline-flex">
                <div class="row">
                    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
                        <div class="container-fluid">
                            <a class="navbar-brand" id="create-user">Create New User</a>
                        </div>
                    </nav>
                    <div class="col-lg-6 m-auto">
                
                        <form>
                
                            <br><br>
                            <div class="card" id="add-user" style="visibility:hidden;"> 
                                 <!-- style="visibility:hidden;" -->
                
                                <div class="card-header bg-primary">
                                    <h1 class="text-white text-center"> Add New User </h1>
                                </div><br>
                                <div class="addUser">
                                <label id="test"> First Name: </label>
                                <input type="text" id="First_Name" class="form-control"> <br>
                
                                <label id="test"> Last Name: </label>
                                <input type="text" id="Last_Name" class="form-control"> <br>
                
                                <label id="test"> Address: </label>
                                <input type="text" id="Address" class="form-control"> <br>
                
                                <label id="test">Phone Number: </label>
                                <input type="tel" id="Phone" class="form-control"> <br>
                
                                <label id="test"> Email Address: </label>
                                <input type="email" id="Email" class="form-control"> <br>
                
                                <label id="test"> Password: </label>
                                <input type="password" id="Password" class="form-control"> <br> 
                
                                <label id="test"> Role ID: </label>
                                <select id="Role_ID" class="form-control"> <br>
                                    <option value="1">Team Member</option>
                                    <option value="2">Manager</option>
                                </select>
                                
                                <button class="btn btn-success" type="button" name="submit" onclick="return ajaxcall()" id="userButton"> Submit </button><br>
                                </div>
                                <!-- 
                                    Change to clear form
                                    <a class="btn btn-info" type="submit" name="cancel" href="index.php"> Cancel </a><br> -->
                
                            </div>
                        </form>
                    </div>
                </div>
            </div>
    </div>
</body>
</html>
<script src="js/jquery.3.2.1.min.js" type="text/javascript"></script>
<script src="js/redirect.js" type="text/javascript"></script>
<script>
  document.getElementById("create-user").addEventListener("click", checkRole);

  function ajaxcall(){
    let _firstname = document.getElementById("First_Name").value;
    let _lastname = document.getElementById("Last_Name").value;
    let _address = document.getElementById("Address").value;
    let _phone = document.getElementById("Phone").value;
    let _email = document.getElementById("Email").value;
    let _password = document.getElementById("Password").value;
    let _roleID = document.getElementById("Role_ID").value;


    $.ajax({
        url: "php/create_staff.php",
        type: "POST",
        datatype: 'json',
        data: {First_Name: _firstname,
            Last_Name: _lastname,
            Address: _address,
            Phone: _phone,
            Email: _email,
            Password: _password,
            Role_ID: _roleID
            },
        success:function(result){
                    
        },
        error: function(){
            console.log("error");
        }
        });
  }
  
  // Hides certain elements by ID if the required role is not met. In the future, parameters can be passed in with each check to change the element checked, role level required, and contents hidden individually. 
  function checkRole(){
    if (roleValue > 1 || roleValue == 0) {
        document.getElementById("add-user").style.visibility = "visible";
    } else {
        document.getElementById("add-user").style.display = "hidden";
        alert("User does not meet role requirements to create a new user.")
    }
  }
</script>
